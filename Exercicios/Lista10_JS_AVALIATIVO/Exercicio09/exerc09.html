<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exercicio 09</title>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <form id="form" method="post" action="form.html">
        <label for="login">Nome de usuário</label>
        <input type="text" name="login" id="login">

        <label for="password">Digite a sua senha</label>
        <input type="password" name="password" id="password">

        <label for="passwordConfirm">Confirme sua senha</label>
        <input type="password" name="passwordConfirm" id="passwordConfirm">

        <p id="mensagem"></p>

        <button type="submit">Cadastrar</button>
    </form>

    <script>
        let form = document.getElementById("form")
        let password = document.getElementById("password")
        let passwordConfirm = document.getElementById("passwordConfirm")
        let login = document.getElementById("login")
        let mensagem = document.getElementById("mensagem")

        function preencherSenha() {
            let senha = password.value;
            if (senha.length > 6 && senha.length < 10) {
                mensagem.textContent = "[OK] A senha deve possuir entre 6 e 10 caracteres"
            }
            else {
                mensagem.textContent = "[X] A senha deve possuir entre 6 e 10 caracteres"
            }
        }

        function verificarSenhasIguais() {
            let senha = password.value;
            let repeteSenha = passwordConfirm.value;


            if (senha == repeteSenha) {
                mensagem.textContent = "As senhas são iguais"

            } else {
                mensagem.textContent = "As senhas não correspondem"
            }
        }

        function verificarCampos() {
            if (login.value.length === 0) {
                mensagem.textContent = "Preencha o nome de usuário";
                return false;
            }
            if (password.value !== passwordConfirm.value) {
                mensagem.textContent = "As senhas não são iguais"
                return false;
            } else if (password.value.length < 6 || password.value.length > 10) {
                    mensagem.textContent = "A senha não contém entre 6 e 10 caracteres";
                    return false;
                }
            return true;
        }
        

        function limparMensagem() {
            mensagem.textContent = ""
        }

        password.addEventListener("keyup", preencherSenha)
        passwordConfirm.addEventListener("keyup", verificarSenhasIguais)
        password.addEventListener("focusout", limparMensagem)
        // passwordConfirm.addEventListener("focusout", limparMensagem)
        form.onsubmit = verificarCampos;

    </script>
</body>

</html>